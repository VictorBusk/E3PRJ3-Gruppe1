\hypertarget{class_i2_c}{}\subsection{I2C Klasse-\/reference}
\label{class_i2_c}\index{I2C@{I2C}}


\hyperlink{class_i2_c}{I2C} class.  




{\ttfamily \#include $<$i2c.\+h$>$}



Samarbejdsdiagram for I2C\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{df/d70/class_i2_c__coll__graph}
\end{center}
\end{figure}
\subsubsection*{Offentlige metoder}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_i2_c_a64303230bf4843297e7ac37ac236ca04}{i2c\+\_\+init} ()
\begin{DoxyCompactList}\small\item\em Initialiser \hyperlink{class_i2_c}{I2C} modulet. \end{DoxyCompactList}\item 
void \hyperlink{class_i2_c_a1b75ff104f3614357d14cee6514ad108}{I2\+C\+S\+\_\+\+I2\+C\+\_\+\+I\+S\+R\+\_\+\+Exit\+Callback} ()
\begin{DoxyCompactList}\small\item\em Motager \char`\"{}\+Exit Callback\char`\"{} fra \hyperlink{class_i2_c}{I2C}. \end{DoxyCompactList}\item 
void \hyperlink{class_i2_c_a3d3187ad377a6ca29b3fac5c809b6012}{i2c\+\_\+tx} ()
\begin{DoxyCompactList}\small\item\em Ryder om efter \hyperlink{class_i2_c}{I2C}. \end{DoxyCompactList}\item 
uint8 \hyperlink{class_i2_c_a58ba88cddd7843f12a40a87c998f00da}{i2c\+Tx\+Buffer} \mbox{[}\hyperlink{i2c_8h_a6458dbf193a0eef0470fc1b08400bfcd}{I2\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}\mbox{]}
\begin{DoxyCompactList}\small\item\em Buffer til afsendelse af data. \end{DoxyCompactList}\item 
uint8 \hyperlink{class_i2_c_a711782550427eea544dabe5394d79a9b}{i2c\+Rx\+Buffer} \mbox{[}\hyperlink{i2c_8h_a6458dbf193a0eef0470fc1b08400bfcd}{I2\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}\mbox{]}
\begin{DoxyCompactList}\small\item\em Buffer til modtagelse af data. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsubsection*{Private attributter}
\begin{DoxyCompactItemize}
\item 
uint8 \hyperlink{class_i2_c_af66ed5dc7817e74d7da731c994721217}{i2c\+Tx\+Buffer} \mbox{[}\hyperlink{i2c_8h_a6458dbf193a0eef0470fc1b08400bfcd}{I2\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}\mbox{]} = \{\hyperlink{i2c_8h_a52bb5b964361ed2f1b18df32c5b8f2c5}{I2\+C\+\_\+\+P\+A\+C\+K\+E\+T\+\_\+\+S\+OP}, \hyperlink{i2c_8h_aee0adbd7dcb13e95337369b7342a27e3}{I2\+C\+\_\+\+S\+T\+S\+\_\+\+C\+M\+D\+\_\+\+F\+A\+IL}, \hyperlink{i2c_8h_aee0adbd7dcb13e95337369b7342a27e3}{I2\+C\+\_\+\+S\+T\+S\+\_\+\+C\+M\+D\+\_\+\+F\+A\+IL}, \hyperlink{i2c_8h_a62b4ae6e51a3d0da47f5165165cdbc0a}{I2\+C\+\_\+\+P\+A\+C\+K\+E\+T\+\_\+\+E\+OP}\}
\begin{DoxyCompactList}\small\item\em Buffer til afsendelse af data. \end{DoxyCompactList}\item 
uint8 \hyperlink{class_i2_c_a88d6ebcf1ef5f528b63cf306ad1a5909}{i2c\+Rx\+Buffer} \mbox{[}\hyperlink{i2c_8h_a6458dbf193a0eef0470fc1b08400bfcd}{I2\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}\mbox{]}
\begin{DoxyCompactList}\small\item\em Buffer til modtagelse af data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsubsection{Detaljeret beskrivelse}
\hyperlink{class_i2_c}{I2C} class. 

Håndter kommunikation via I2\+C-\/busset. \begin{DoxyAuthor}{Forfatter}
Jeppe Stærk Antonsen (\href{mailto:201271201@uni.au.dk}{\tt 201271201@uni.\+au.\+dk}) 
\end{DoxyAuthor}


\subsubsection{Dokumentation af medlemsfunktioner}
\index{I2C@{I2C}!i2c\+\_\+init@{i2c\+\_\+init}}
\index{i2c\+\_\+init@{i2c\+\_\+init}!I2C@{I2C}}
\paragraph[{\texorpdfstring{i2c\+\_\+init()}{i2c_init()}}]{\setlength{\rightskip}{0pt plus 5cm}void i2c\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{class_i2_c_a64303230bf4843297e7ac37ac236ca04}{}\label{class_i2_c_a64303230bf4843297e7ac37ac236ca04}


Initialiser \hyperlink{class_i2_c}{I2C} modulet. 

Initailiser \hyperlink{class_i2_c}{I2C} komponent på P\+SoC\textquotesingle{}en.

\begin{DoxyAuthor}{Forfatter}
Jeppe Stærk (\href{mailto:201271201@uni.au.dk}{\tt 201271201@uni.\+au.\+dk}) 
\end{DoxyAuthor}


Defineret på linje 49 i filen i2c.\+c.



Indeholder referencer til I2\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE, i2c\+Rx\+Buffer() og i2c\+Tx\+Buffer().



Refereret til af main().


\begin{DoxyCode}
50 \{
51   I2CS\_I2CSlaveInitReadBuf(\hyperlink{class_i2_c_a58ba88cddd7843f12a40a87c998f00da}{i2cTxBuffer}, \hyperlink{i2c_8h_a6458dbf193a0eef0470fc1b08400bfcd}{I2C\_BUFFER\_SIZE});
52   I2CS\_I2CSlaveClearReadBuf();
53   I2CS\_I2CSlaveClearReadStatus();
54   
55   I2CS\_I2CSlaveInitWriteBuf(\hyperlink{class_i2_c_a711782550427eea544dabe5394d79a9b}{i2cRxBuffer}, \hyperlink{i2c_8h_a6458dbf193a0eef0470fc1b08400bfcd}{I2C\_BUFFER\_SIZE});
56   I2CS\_I2CSlaveClearWriteBuf();
57   I2CS\_I2CSlaveClearWriteStatus();
58   
59   I2CS\_Start();
60 \}
\end{DoxyCode}


Her er kald-\/grafen for denne funktion\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=231pt]{d4/d47/class_i2_c_a64303230bf4843297e7ac37ac236ca04_cgraph}
\end{center}
\end{figure}




Her er kalder-\/grafen for denne funktion\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{d4/d47/class_i2_c_a64303230bf4843297e7ac37ac236ca04_icgraph}
\end{center}
\end{figure}


\index{I2C@{I2C}!i2c\+\_\+tx@{i2c\+\_\+tx}}
\index{i2c\+\_\+tx@{i2c\+\_\+tx}!I2C@{I2C}}
\paragraph[{\texorpdfstring{i2c\+\_\+tx()}{i2c_tx()}}]{\setlength{\rightskip}{0pt plus 5cm}void i2c\+\_\+tx (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{class_i2_c_a3d3187ad377a6ca29b3fac5c809b6012}{}\label{class_i2_c_a3d3187ad377a6ca29b3fac5c809b6012}


Ryder om efter \hyperlink{class_i2_c}{I2C}. 

Efter fuldført afsendelse af pakke til I2\+C-\/master, bliver status nulstillet.

\begin{DoxyAuthor}{Forfatter}
Jeppe Stærk (\href{mailto:201271201@uni.au.dk}{\tt 201271201@uni.\+au.\+dk}) 
\end{DoxyAuthor}


Defineret på linje 115 i filen i2c.\+c.



Refereret til af main().


\begin{DoxyCode}
116 \{
117   \textcolor{keywordflow}{if}(0u != (I2CS\_I2CSlaveStatus() & I2CS\_I2C\_SSTAT\_RD\_CMPLT))
118   \{
119     I2CS\_I2CSlaveClearReadBuf();
120     (void) I2CS\_I2CSlaveClearReadStatus();
121   \}
122 \}
\end{DoxyCode}


Her er kalder-\/grafen for denne funktion\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=196pt]{d4/d47/class_i2_c_a3d3187ad377a6ca29b3fac5c809b6012_icgraph}
\end{center}
\end{figure}


\index{I2C@{I2C}!i2c\+Rx\+Buffer@{i2c\+Rx\+Buffer}}
\index{i2c\+Rx\+Buffer@{i2c\+Rx\+Buffer}!I2C@{I2C}}
\paragraph[{\texorpdfstring{i2c\+Rx\+Buffer[I2\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE]}{i2cRxBuffer[I2C_BUFFER_SIZE]}}]{\setlength{\rightskip}{0pt plus 5cm}uint8 i2c\+Rx\+Buffer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_i2_c_a711782550427eea544dabe5394d79a9b}{}\label{class_i2_c_a711782550427eea544dabe5394d79a9b}


Buffer til modtagelse af data. 

En buffer der indeholder de data pakker der skal modtagelse over I2\+C-\/busset.

\begin{DoxyAuthor}{Forfatter}
Jeppe Stærk (\href{mailto:201271201@uni.au.dk}{\tt 201271201@uni.\+au.\+dk}) 
\end{DoxyAuthor}


Defineret på linje 76 i filen i2c.\+h.



Refereret til af i2c\+\_\+init() og I2\+C\+S\+\_\+\+I2\+C\+\_\+\+I\+S\+R\+\_\+\+Exit\+Callback().



Her er kalder-\/grafen for denne funktion\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d47/class_i2_c_a711782550427eea544dabe5394d79a9b_icgraph}
\end{center}
\end{figure}


\index{I2C@{I2C}!I2\+C\+S\+\_\+\+I2\+C\+\_\+\+I\+S\+R\+\_\+\+Exit\+Callback@{I2\+C\+S\+\_\+\+I2\+C\+\_\+\+I\+S\+R\+\_\+\+Exit\+Callback}}
\index{I2\+C\+S\+\_\+\+I2\+C\+\_\+\+I\+S\+R\+\_\+\+Exit\+Callback@{I2\+C\+S\+\_\+\+I2\+C\+\_\+\+I\+S\+R\+\_\+\+Exit\+Callback}!I2C@{I2C}}
\paragraph[{\texorpdfstring{I2\+C\+S\+\_\+\+I2\+C\+\_\+\+I\+S\+R\+\_\+\+Exit\+Callback()}{I2CS_I2C_ISR_ExitCallback()}}]{\setlength{\rightskip}{0pt plus 5cm}void I2\+C\+S\+\_\+\+I2\+C\+\_\+\+I\+S\+R\+\_\+\+Exit\+Callback (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{class_i2_c_a1b75ff104f3614357d14cee6514ad108}{}\label{class_i2_c_a1b75ff104f3614357d14cee6514ad108}


Motager \char`\"{}\+Exit Callback\char`\"{} fra \hyperlink{class_i2_c}{I2C}. 

En \char`\"{}\+Interrupt Service Routine(\+I\+S\+R)\char`\"{} der aktiveres ved færdig modtagelse af kald via I2\+C-\/busset, det modtaget data behandles og håndteres.

\begin{DoxyAuthor}{Forfatter}
Jeppe Stærk (\href{mailto:201271201@uni.au.dk}{\tt 201271201@uni.\+au.\+dk}) 
\end{DoxyAuthor}


Defineret på linje 69 i filen i2c.\+c.



Indeholder referencer til Action\+::cmd, C\+M\+D\+\_\+\+S\+E\+T\+\_\+\+Z\+\_\+\+P\+OS, dataZ, I2\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE, I2\+C\+\_\+\+P\+A\+C\+K\+E\+T\+\_\+\+C\+M\+D\+\_\+\+P\+OS, I2\+C\+\_\+\+P\+A\+C\+K\+E\+T\+\_\+\+V\+A\+L\+\_\+\+P\+OS, i2c\+Rx\+Buffer(), Data\+Z\+::isr\+StopZ, Queue\+::push\+Queue() og Action\+::val.


\begin{DoxyCode}
70 \{
71   \textcolor{keywordflow}{if}(I2CS\_I2CSlaveGetWriteBufSize() == \hyperlink{i2c_8h_a6458dbf193a0eef0470fc1b08400bfcd}{I2C\_BUFFER\_SIZE})
72   \{
73     DEBUG\_PutCRLF();
74     DEBUG\_PutString(\textcolor{stringliteral}{"** isr exit callback **"});
75     DEBUG\_PutCRLF();
76     DEBUG\_PutString(\textcolor{stringliteral}{"I> i2cRxBuffer[0]: "});
77     DEBUG\_PutHexByte(\hyperlink{class_i2_c_a711782550427eea544dabe5394d79a9b}{i2cRxBuffer}[0]);
78     DEBUG\_PutString(\textcolor{stringliteral}{" [1]: "});
79     DEBUG\_PutHexByte(\hyperlink{class_i2_c_a711782550427eea544dabe5394d79a9b}{i2cRxBuffer}[1]);
80     DEBUG\_PutString(\textcolor{stringliteral}{" [2]: "});
81     DEBUG\_PutHexByte(\hyperlink{class_i2_c_a711782550427eea544dabe5394d79a9b}{i2cRxBuffer}[2]);
82     DEBUG\_PutString(\textcolor{stringliteral}{" [3]: "});
83     DEBUG\_PutHexByte(\hyperlink{class_i2_c_a711782550427eea544dabe5394d79a9b}{i2cRxBuffer}[3]);
84     DEBUG\_PutString(\textcolor{stringliteral}{" buffer size: "});
85     DEBUG\_PutHexByte(I2CS\_I2CSlaveGetWriteBufSize());
86     DEBUG\_PutCRLF();
87     
88     \textcolor{keyword}{struct }\hyperlink{queue_8h_df/d8c/struct_action}{Action} action;
89     action.\hyperlink{queue_8h_a85092d82ab6ea85dad51ba78cbda36a0}{cmd} = \hyperlink{class_i2_c_a711782550427eea544dabe5394d79a9b}{i2cRxBuffer}[\hyperlink{i2c_8h_ac13fcfeded7dc2d82fa4734456f3761f}{I2C\_PACKET\_CMD\_POS}];
90     action.val = \hyperlink{class_i2_c_a711782550427eea544dabe5394d79a9b}{i2cRxBuffer}[\hyperlink{i2c_8h_a68506c3651f015716bb2c135e8e7b972}{I2C\_PACKET\_VAL\_POS}];
91     
92     \textcolor{keywordflow}{switch}(\hyperlink{class_i2_c_a711782550427eea544dabe5394d79a9b}{i2cRxBuffer}[\hyperlink{i2c_8h_ac13fcfeded7dc2d82fa4734456f3761f}{I2C\_PACKET\_CMD\_POS}]) \{
93       \textcolor{keywordflow}{case} \hyperlink{handler_8h_a6e695093ea021ccac7cc5d2d788095c9}{CMD\_SET\_Z\_POS} :
94         \hyperlink{data_8h_ace1aa5b973b9358f7236c0c9deca9370}{dataZ}.\hyperlink{data_8h_ae55ff8378d0a07b118000a98b273141f}{isrStopZ} = 1;
95         DEBUG\_PutString(\textcolor{stringliteral}{") isrStopZ = 1"});
96         DEBUG\_PutCRLF();
97         \hyperlink{queue_8h_a0012fa831aa1529e5ed3a6610b733423}{pushQueue}(action);
98         \textcolor{keywordflow}{break};
99       \textcolor{keywordflow}{default} :
100         \hyperlink{queue_8h_a0012fa831aa1529e5ed3a6610b733423}{pushQueue}(action);
101         \textcolor{keywordflow}{break};
102     \}
103     I2CS\_I2CSlaveClearWriteBuf();
104     (void) I2CS\_I2CSlaveClearWriteStatus();
105   \}
106 \}
\end{DoxyCode}


Her er kald-\/grafen for denne funktion\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d47/class_i2_c_a1b75ff104f3614357d14cee6514ad108_cgraph}
\end{center}
\end{figure}


\index{I2C@{I2C}!i2c\+Tx\+Buffer@{i2c\+Tx\+Buffer}}
\index{i2c\+Tx\+Buffer@{i2c\+Tx\+Buffer}!I2C@{I2C}}
\paragraph[{\texorpdfstring{i2c\+Tx\+Buffer[I2\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE]}{i2cTxBuffer[I2C_BUFFER_SIZE]}}]{\setlength{\rightskip}{0pt plus 5cm}uint8 i2c\+Tx\+Buffer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{class_i2_c_a58ba88cddd7843f12a40a87c998f00da}{}\label{class_i2_c_a58ba88cddd7843f12a40a87c998f00da}


Buffer til afsendelse af data. 

En buffer der indeholder de data pakker der skal sende over I2\+C-\/busset.

\begin{DoxyAuthor}{Forfatter}
Jeppe Stærk (\href{mailto:201271201@uni.au.dk}{\tt 201271201@uni.\+au.\+dk}) 
\end{DoxyAuthor}


Defineret på linje 67 i filen i2c.\+h.



Refereret til af Handler\+::handler() og i2c\+\_\+init().



Her er kalder-\/grafen for denne funktion\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=346pt]{d4/d47/class_i2_c_a58ba88cddd7843f12a40a87c998f00da_icgraph}
\end{center}
\end{figure}




\subsubsection{Felt-\/dokumentation}
\index{I2C@{I2C}!i2c\+Rx\+Buffer@{i2c\+Rx\+Buffer}}
\index{i2c\+Rx\+Buffer@{i2c\+Rx\+Buffer}!I2C@{I2C}}
\paragraph[{\texorpdfstring{i2c\+Rx\+Buffer}{i2cRxBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}uint8 i2c\+Rx\+Buffer\mbox{[}{\bf I2\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}\mbox{]}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_i2_c_a88d6ebcf1ef5f528b63cf306ad1a5909}{}\label{class_i2_c_a88d6ebcf1ef5f528b63cf306ad1a5909}


Buffer til modtagelse af data. 

En buffer der indeholder de data pakker der skal modtagelse over I2\+C-\/busset.

\begin{DoxyAuthor}{Forfatter}
Jeppe Stærk (\href{mailto:201271201@uni.au.dk}{\tt 201271201@uni.\+au.\+dk}) 
\end{DoxyAuthor}


Defineret på linje 35 i filen i2c.\+c.

\index{I2C@{I2C}!i2c\+Tx\+Buffer@{i2c\+Tx\+Buffer}}
\index{i2c\+Tx\+Buffer@{i2c\+Tx\+Buffer}!I2C@{I2C}}
\paragraph[{\texorpdfstring{i2c\+Tx\+Buffer}{i2cTxBuffer}}]{\setlength{\rightskip}{0pt plus 5cm}uint8 i2c\+Tx\+Buffer\mbox{[}{\bf I2\+C\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}\mbox{]} = \{{\bf I2\+C\+\_\+\+P\+A\+C\+K\+E\+T\+\_\+\+S\+OP}, {\bf I2\+C\+\_\+\+S\+T\+S\+\_\+\+C\+M\+D\+\_\+\+F\+A\+IL}, {\bf I2\+C\+\_\+\+S\+T\+S\+\_\+\+C\+M\+D\+\_\+\+F\+A\+IL}, {\bf I2\+C\+\_\+\+P\+A\+C\+K\+E\+T\+\_\+\+E\+OP}\}\hspace{0.3cm}{\ttfamily [private]}}\hypertarget{class_i2_c_af66ed5dc7817e74d7da731c994721217}{}\label{class_i2_c_af66ed5dc7817e74d7da731c994721217}


Buffer til afsendelse af data. 

En buffer der indeholder de data pakker der skal sende over I2\+C-\/busset.

\begin{DoxyAuthor}{Forfatter}
Jeppe Stærk (\href{mailto:201271201@uni.au.dk}{\tt 201271201@uni.\+au.\+dk}) 
\end{DoxyAuthor}


Defineret på linje 26 i filen i2c.\+c.



Dokumentationen for denne klasse blev genereret ud fra filerne\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{i2c_8h}{i2c.\+h}\item 
\hyperlink{i2c_8c}{i2c.\+c}\end{DoxyCompactItemize}
