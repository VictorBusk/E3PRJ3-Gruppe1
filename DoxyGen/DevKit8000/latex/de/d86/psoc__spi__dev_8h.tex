\hypertarget{psoc__spi__dev_8h}{}\subsection{psoc\+\_\+spi\+\_\+dev.\+h filreference}
\label{psoc__spi__dev_8h}\index{psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}}
{\ttfamily \#include $<$linux/spi/spi.\+h$>$}\\*
Inklusions-\/afhængighedsgraf for psoc\+\_\+spi\+\_\+dev.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=165pt]{dc/d83/psoc__spi__dev_8h__incl}
\end{center}
\end{figure}
Denne graf viser, hvilke filer der direkte eller indirekte inkluderer denne fil\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{d9/d35/psoc__spi__dev_8h__dep__incl}
\end{center}
\end{figure}
\subsubsection*{Funktioner}
\begin{DoxyCompactItemize}
\item 
struct spi\+\_\+device $\ast$ \hyperlink{psoc__spi__dev_8h_a2870b5e4e3611c8ba3baf9592c4d8be1}{psoc4\+\_\+get\+\_\+device} (void)
\item 
int \hyperlink{psoc__spi__dev_8h_aafd69a02e9977933fb6789e99d296bee}{psoc4\+\_\+spi\+\_\+read} (struct spi\+\_\+device $\ast$spi, u16 $\ast$rx\+Data)
\item 
int \hyperlink{psoc__spi__dev_8h_a34cb58fb736b9f7012add30a88839107}{psoc4\+\_\+spi\+\_\+write} (struct spi\+\_\+device $\ast$spi, u16 tx\+Date)
\item 
int \hyperlink{psoc__spi__dev_8h_a8d33dfea48e2a1e88f7758492ede12cf}{psoc4\+\_\+spi\+\_\+init} (void)
\item 
void \hyperlink{psoc__spi__dev_8h_a9d271797d6983fd0f289b7f6b266d0be}{psoc4\+\_\+spi\+\_\+exit} (void)
\end{DoxyCompactItemize}


\subsubsection{Funktions-\/dokumentation}
\index{psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}!psoc4\+\_\+get\+\_\+device@{psoc4\+\_\+get\+\_\+device}}
\index{psoc4\+\_\+get\+\_\+device@{psoc4\+\_\+get\+\_\+device}!psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}}
\paragraph[{\texorpdfstring{psoc4\+\_\+get\+\_\+device(void)}{psoc4_get_device(void)}}]{\setlength{\rightskip}{0pt plus 5cm}struct spi\+\_\+device$\ast$ psoc4\+\_\+get\+\_\+device (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{psoc__spi__dev_8h_a2870b5e4e3611c8ba3baf9592c4d8be1}{}\label{psoc__spi__dev_8h_a2870b5e4e3611c8ba3baf9592c4d8be1}


Defineret på linje 16 i filen psoc\+\_\+spi\+\_\+dev.\+c.



Indeholder referencer til psoc4\+\_\+spi\+\_\+device.



Refereret til af psoc4\+\_\+cdrv\+\_\+open() og psoc4\+\_\+cdrv\+\_\+release().


\begin{DoxyCode}
16                                          \{
17     \textcolor{keywordflow}{return} \hyperlink{psoc__spi__dev_8c_a777bc87492fc7e5d359aa1f0450fc370}{psoc4\_spi\_device};
18 \}
\end{DoxyCode}


Her er kalder-\/grafen for denne funktion\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d86/psoc__spi__dev_8h_a2870b5e4e3611c8ba3baf9592c4d8be1_icgraph}
\end{center}
\end{figure}


\index{psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}!psoc4\+\_\+spi\+\_\+exit@{psoc4\+\_\+spi\+\_\+exit}}
\index{psoc4\+\_\+spi\+\_\+exit@{psoc4\+\_\+spi\+\_\+exit}!psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}}
\paragraph[{\texorpdfstring{psoc4\+\_\+spi\+\_\+exit(void)}{psoc4_spi_exit(void)}}]{\setlength{\rightskip}{0pt plus 5cm}void psoc4\+\_\+spi\+\_\+exit (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{psoc__spi__dev_8h_a9d271797d6983fd0f289b7f6b266d0be}{}\label{psoc__spi__dev_8h_a9d271797d6983fd0f289b7f6b266d0be}


Defineret på linje 165 i filen psoc\+\_\+spi\+\_\+dev.\+c.



Indeholder referencer til psoc4\+\_\+spi\+\_\+driver.



Refereret til af psoc4\+\_\+cdrv\+\_\+exit() og psoc4\+\_\+cdrv\+\_\+init().


\begin{DoxyCode}
166 \{
167     spi\_unregister\_driver(&\hyperlink{psoc__spi__dev_8c_a6e4de39568a493450dcb9ce0684944af}{psoc4\_spi\_driver});
168 \}\end{DoxyCode}


Her er kalder-\/grafen for denne funktion\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d86/psoc__spi__dev_8h_a9d271797d6983fd0f289b7f6b266d0be_icgraph}
\end{center}
\end{figure}


\index{psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}!psoc4\+\_\+spi\+\_\+init@{psoc4\+\_\+spi\+\_\+init}}
\index{psoc4\+\_\+spi\+\_\+init@{psoc4\+\_\+spi\+\_\+init}!psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}}
\paragraph[{\texorpdfstring{psoc4\+\_\+spi\+\_\+init(void)}{psoc4_spi_init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int psoc4\+\_\+spi\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{psoc__spi__dev_8h_a8d33dfea48e2a1e88f7758492ede12cf}{}\label{psoc__spi__dev_8h_a8d33dfea48e2a1e88f7758492ede12cf}


Defineret på linje 148 i filen psoc\+\_\+spi\+\_\+dev.\+c.



Indeholder referencer til psoc4\+\_\+spi\+\_\+driver.



Refereret til af psoc4\+\_\+cdrv\+\_\+init().


\begin{DoxyCode}
149 \{
150     \textcolor{keywordtype}{int} err;
151     
152     err = spi\_register\_driver(&\hyperlink{psoc__spi__dev_8c_a6e4de39568a493450dcb9ce0684944af}{psoc4\_spi\_driver});
153     
154     \textcolor{keywordflow}{if}(err<0)
155         printk (KERN\_ALERT \textcolor{stringliteral}{"Error %d registering the psoc4 SPI driver\(\backslash\)n"}, err);
156     
157     \textcolor{keywordflow}{return} err;
158 \}
\end{DoxyCode}


Her er kalder-\/grafen for denne funktion\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d86/psoc__spi__dev_8h_a8d33dfea48e2a1e88f7758492ede12cf_icgraph}
\end{center}
\end{figure}


\index{psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}!psoc4\+\_\+spi\+\_\+read@{psoc4\+\_\+spi\+\_\+read}}
\index{psoc4\+\_\+spi\+\_\+read@{psoc4\+\_\+spi\+\_\+read}!psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}}
\paragraph[{\texorpdfstring{psoc4\+\_\+spi\+\_\+read(struct spi\+\_\+device $\ast$spi, u16 $\ast$rx\+Data)}{psoc4_spi_read(struct spi_device *spi, u16 *rxData)}}]{\setlength{\rightskip}{0pt plus 5cm}int psoc4\+\_\+spi\+\_\+read (
\begin{DoxyParamCaption}
\item[{struct spi\+\_\+device $\ast$}]{spi, }
\item[{u16 $\ast$}]{rx\+Data}
\end{DoxyParamCaption}
)}\hypertarget{psoc__spi__dev_8h_aafd69a02e9977933fb6789e99d296bee}{}\label{psoc__spi__dev_8h_aafd69a02e9977933fb6789e99d296bee}


Defineret på linje 25 i filen psoc\+\_\+spi\+\_\+dev.\+c.



Indeholder referencer til M\+O\+D\+U\+L\+E\+\_\+\+D\+E\+B\+UG.



Refereret til af psoc4\+\_\+cdrv\+\_\+read().


\begin{DoxyCode}
26 \{
27     \textcolor{keyword}{struct }spi\_transfer t[1];
28     \textcolor{keyword}{struct }spi\_message m;
29     u16 rxBuffer = 0;
30     
31     \textcolor{comment}{/* Check for valid spi device */}
32     \textcolor{keywordflow}{if}(!spi)
33         \textcolor{keywordflow}{return} -ENODEV;
34     
35     \textcolor{comment}{/* Init Message */}
36     memset(t, 0, \textcolor{keyword}{sizeof}(t));
37     spi\_message\_init(&m);
38     m.spi = spi;
39     
40     t[0].delay\_usecs = 60;
41     t[0].tx\_buf = NULL;
42     t[0].rx\_buf = &rxBuffer;
43     t[0].len = 2;
44     spi\_message\_add\_tail(&t[0], &m);
45     
46     \textcolor{comment}{/* Transmit SPI Data (blocking) */}
47     spi\_sync(m.spi, &m);
48     
49     \textcolor{keywordflow}{if}(\hyperlink{psoc__spi__dev_8c_ae5874b45ddf4a96602ab046bb2bca80a}{MODULE\_DEBUG})
50         printk(KERN\_DEBUG \textcolor{stringliteral}{"dev\_read: Read data 0x%hx\(\backslash\)n"}, rxBuffer);
51       
52     *rxData = rxBuffer;
53     \textcolor{keywordflow}{return} 0;
54 \}
\end{DoxyCode}


Her er kalder-\/grafen for denne funktion\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=295pt]{de/d86/psoc__spi__dev_8h_aafd69a02e9977933fb6789e99d296bee_icgraph}
\end{center}
\end{figure}


\index{psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}!psoc4\+\_\+spi\+\_\+write@{psoc4\+\_\+spi\+\_\+write}}
\index{psoc4\+\_\+spi\+\_\+write@{psoc4\+\_\+spi\+\_\+write}!psoc\+\_\+spi\+\_\+dev.\+h@{psoc\+\_\+spi\+\_\+dev.\+h}}
\paragraph[{\texorpdfstring{psoc4\+\_\+spi\+\_\+write(struct spi\+\_\+device $\ast$spi, u16 tx\+Date)}{psoc4_spi_write(struct spi_device *spi, u16 txDate)}}]{\setlength{\rightskip}{0pt plus 5cm}int psoc4\+\_\+spi\+\_\+write (
\begin{DoxyParamCaption}
\item[{struct spi\+\_\+device $\ast$}]{spi, }
\item[{u16}]{tx\+Date}
\end{DoxyParamCaption}
)}\hypertarget{psoc__spi__dev_8h_a34cb58fb736b9f7012add30a88839107}{}\label{psoc__spi__dev_8h_a34cb58fb736b9f7012add30a88839107}


Defineret på linje 61 i filen psoc\+\_\+spi\+\_\+dev.\+c.



Indeholder referencer til M\+O\+D\+U\+L\+E\+\_\+\+D\+E\+B\+UG.



Refereret til af psoc4\+\_\+cdrv\+\_\+write().


\begin{DoxyCode}
62 \{
63     \textcolor{keyword}{struct }spi\_transfer t[1];
64     \textcolor{keyword}{struct }spi\_message m;
65         
66     \textcolor{comment}{/* Check for valid spi device */}
67     \textcolor{keywordflow}{if}(!spi)
68         \textcolor{keywordflow}{return} -ENODEV;
69     
70     \textcolor{comment}{/* Init Message */}
71     memset(&t, 0, \textcolor{keyword}{sizeof}(t)); 
72     spi\_message\_init(&m);
73     m.spi = spi;
74     
75     \textcolor{keywordflow}{if}(\hyperlink{psoc__spi__dev_8c_ae5874b45ddf4a96602ab046bb2bca80a}{MODULE\_DEBUG})
76         printk(KERN\_DEBUG \textcolor{stringliteral}{"dev\_write: Write data 0x%x\(\backslash\)n"}, txData);
77 
78     \textcolor{comment}{/* Configure tx/rx buffers */}
79     t[0].tx\_buf = &txData;
80     t[0].rx\_buf = NULL;
81     t[0].len = 2;
82     t[0].delay\_usecs = 60;
83     spi\_message\_add\_tail(&t[0], &m);
84 
85     \textcolor{comment}{/* Transmit SPI Data (blocking) */}
86     spi\_sync(m.spi, &m);
87     
88     \textcolor{keywordflow}{return} 0;
89 \}
\end{DoxyCode}


Her er kalder-\/grafen for denne funktion\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d86/psoc__spi__dev_8h_a34cb58fb736b9f7012add30a88839107_icgraph}
\end{center}
\end{figure}


